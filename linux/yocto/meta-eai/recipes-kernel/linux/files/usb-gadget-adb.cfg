CONFIG_USB_SUPPORT=y
CONFIG_USB_DWC3=y
CONFIG_USB_DWC3_GADGET=y
CONFIG_USB_DWC3_OF_SIMPLE=y
CONFIG_USB_DWC3_ENSEMBLE=y
CONFIG_USB_GADGET=y
CONFIG_USB_CONFIGFS=y
CONFIG_USB_LIBCOMPOSITE=y
CONFIG_USB_CONFIGFS_ECM=y
# FunctionFS via configfs composite (not legacy g_ffs which steals UDC)
CONFIG_USB_CONFIGFS_F_FS=y
# CONFIG_USB_FUNCTIONFS is not set
CONFIG_USB_F_ECM=y
# Disable g_serial â€” it auto-binds UDC, blocking configfs composite gadget
# CONFIG_USB_G_SERIAL is not set
# TCP/IP networking stack (required for USB-ECM IP connectivity)
CONFIG_NET=y
CONFIG_PACKET=y
CONFIG_INET=y
# Disable hardware ethernet drivers (no PHY on this board, STMMAC hangs)
# CONFIG_ETHERNET is not set
# CONFIG_STMMAC_ETH is not set
# CONFIG_WLAN is not set
# CONFIG_WIRELESS is not set
